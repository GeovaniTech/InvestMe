<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://java.sun.com/jsf/core">
	
	<h:head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>InvestMe</title>
		<style>
			* {
				margin: 0px;
				padding: 0px;
				box-sizing: border-box;
			}
			
			#form-menu {
				top: 0;
				left: 0;
				width: 250px;
				height: 100vh;
				padding: 10px;
				position: fixed;
				margin-right:250px;
				color: white;
				background-color: #292522;
				display: flex;
				flex-direction: column;
				justify-content: flex-start;
				align-items: center;
				trasition: 0.4s;
			}
			
			#form-menu > * {
				width: 100%;
				trasition: 0.4s;
			}
			
			.ui-menu {
				border: 0px solid #292522 !important;
				color: white !important;
				background-color: #292522 !important;
			}
			
			.ui-menuitem-text {
				color: white !important;
			}
			
			.ui-menuitem:hover .ui-menuitem-text {
				color: black !important;
			}
			
			.submenu {
				border: 0px solid #292522 !important;
				color: white !important;
				background-color: #292522 !important;
			}
			
			.submenu > * {
				color: white !important;
			}
			
			.name-logo {
				display: flex;
				flex-direction: row;
				justify-content: center;
				align-center: center;
				margin-bottom: 10px;
				font-family: 'Poppins', sans-serif;
				font-size: 20px;
			}
			
			.name-logo span  {
				color: #11766d;
			}
			
			#form-menu-header {
				display: flex;
				flex-direction: row;
				justify-content: flex-end;
				align-items: center;
				width: 100%;
				height: 60px;
				background-color: #292522;
			}
		</style>
	</h:head>
	
	<h:body>
		<h:form id="form-menu">
			<div class="name-logo">
				<h1>Invest<span>Me</span></h1>
			</div>
			
			<p:menu 
				toggleable="true">
				
				<p:submenu
					label="Wallets"
					styleClass="submenu">
					
					<p:menuitem
						icon="pi pi-chart-line"
						outcome="/pages/investments.xhtml">
						Invetments
					</p:menuitem>
					
					<p:menuitem
						icon="pi pi-euro"
						outcome="/pages/expenditures.xhtml">
						Expenditures
					</p:menuitem>
				</p:submenu>
							
				<p:submenu
					label="Records"
					styleClass="submenu">
					
					<p:menuitem 
						icon="pi pi-credit-card"
						onclick="PF('dialog-types').show()">
						Types
					</p:menuitem>

					<p:menuitem
						onclick="PF('dialog-transactions').show()"
						icon="pi pi-plus">
						New Transaction
					</p:menuitem>
				</p:submenu>
				
				<p:submenu
					label="Reports"
					styleClass="submenu">
					
					<p:menuitem
						icon="pi pi-file-excel">
						Excel
					</p:menuitem>
					
					<p:menuitem
						icon="pi pi-file-pdf">
						PDF
					</p:menuitem>
				</p:submenu>
			</p:menu>
		</h:form>
	
		<h:form id="form-menu-header">
			<p:commandButton 
				styleClass="ui-button-raised ui-button-flat"
				style="color: white; margin-right: 10px;"
				icon="pi pi-user"/>
			
			<p:commandButton
				styleClass="ui-button-raised ui-button-flat" 
				style="color: white; margin-right: 10px;"
				icon="pi pi-sign-out"/>
		</h:form>
		
		<!-- DIALOG TYPES -->
		<p:dialog
			header="Types"
			widgetVar="dialog-types"
			width="60%"
			height="60%"
			modal="true">
			
			<h:form>
				<p:inputText 
					value="#{MBType.dtoType.name}"
					placeholder="Name"
					style="margin-bottom: 10px;"/>
				
				<p:commandButton 
					value="Register"
					action="#{MBType.save()}"
					update="tableTypes, growl, @form"/>
			</h:form>
			
			<p:dataTable
				id="tableTypes"
				value="#{MBType.types}"
				var="type"
				paginator="true"
				rows="6"
				paginatorPosition="bottom">
				
				<p:column headerText="Id">
					<h:outputText value="#{type.name}" />
				</p:column>
				
				<p:column headerText="Name">
					<h:outputText varlue="#{type.name}" />
				</p:column>
				
				<p:column headerText="Id">
					<div class="options-menu">
						<p:commandButton 
							value="Deletar"
							action="#{MBType.remove(type)}"
							update="tableTypes, growl" />
					</div>
				</p:column>
			</p:dataTable>
		</p:dialog>
	
		<!-- DIALOG TRANSACTION -->
		<p:dialog
			header="Transactions"
			widgetVar="dialog-transactions">
			
			<h:form>
				<h:panelGrid columns="2">
					<p:inputText 
						placeholder="Active"
						value="#{MBTransaction.dtoTransacation.active}" />
					
					<p:inputNumber 
						placeholder="Price"
						value="#{MBTransaction.dtoTransacation.price}" />
					
					<p:inputNumber 
						placeholder="Amount"
						value="#{MBTransaction.dtoTransacation.amount}" />
					
					<p:datePicker 
						placeholder="When"
						value="#{MBTransaction.dtoTransacation.date}" />
					
					<p:selectOneMenu value="#{MBTransaction.dtoTransacation.typeTrasanction}">
						<f:selectItem 
							itemLabel="Investment"
							itemValue="Investment" />
							
						<f:selectItem 
							itemLabel="Expenditure"
							itemValue="Expenditure" />
					</p:selectOneMenu>
					
					<p:selectOneMenu value="#{MBTransaction.convertType}">
						<f:selectItems 
							var="type"
							value="#{MBType.types}"
							itemLabel="#{type.name}"
							itemValue="#{type.id}" />
					</p:selectOneMenu>
				</h:panelGrid>
				
				<p:commandButton 
					value="Save"
					action="#{MBTransaction.save()}"/>
			</h:form>
			
			<h:panelGroup id="transactionsTable">
				<p:dataTable
					var="transaction"
					value="#{MBTransaction.transactions}"
					rows="15"
					paginator="true"
					paginatorPosition="bottom">
					
					<p:column headerText="Active">
						<h:outputText value="#{transaction.active}" />
					</p:column>
					
					<p:column headerText="Type">
						<h:outputText value="#{transaction.typeActive.name}" />
					</p:column>	
					
					<p:column headerText="Price">
						<h:outputText value="#{transaction.price}" />
					</p:column>
					
					<p:column headerText="Amount">
						<h:outputText value="#{transaction.amount}" />
					</p:column>

					<p:column headerText="When">
						<h:outputText value="#{transaction.date}">
							<f:convertDateTime pattern="dd/MM/yyyy"/>
						</h:outputText>
					</p:column>										
					
					<p:column headerText="Type Transaction">
						<h:outputText value="#{transaction.typeTrasanction}" />
					</p:column>					
				</p:dataTable>
			</h:panelGroup>
		</p:dialog>
	</h:body>
</html>
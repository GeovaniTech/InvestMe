<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:components="http://java.sun.com/jsf/composite/components">
	
	<h:head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>InvestMe</title>
	</h:head>
	
	<h:body>
		<ui:composition template="/template/layout.xhtml">
			<ui:define name="body">
				<style>
					h2 {
						font-family: 'Poppins', sans-serif;
						font-size: 30px;
					}
					
					.container-cards {
						display: flex;
						flex-direction: row;
						justify-content: space-around;
						align-items: center;
					}
				</style>
				
				<h:panelGroup class="container-cards" id="dashboard">			
					<components:card 
						value="#{MBInvestment.totalSpent != null ? MBInvestment.totalSpent : 0}"
						description="Spents"
						icon="pi pi-dollar" />
					
					<components:card 
						value="#{MBInvestment.totalActions != null ? MBInvestment.totalActions : 0}"
						description="Actions"
						icon="pi pi-credit-card" />
						
					<components:card 
						value="#{MBInvestment.totalFiis != null ? MBInvestment.totalFiis : 0}"
						description="Fiis"
						icon="pi pi-building" />
					
					<components:card 
						value="#{MBInvestment.totalFixedIncome != null ? MBInvestment.totalFixedIncome : 0}"
						description="Fixed Income"
						icon="pi pi-chart-line" />
						
					<components:card 
						value="#{MBInvestment.totalCriptocurrencys != null ? MBInvestment.totalCriptocurrencys : 0}"
						description="Criptos"
						icon="pi pi-bitcoin" />
				</h:panelGroup>
				
				<h:form id="tableWallet">
					<p:dataTable
						value="#{MBInvestment.investments}"
						var="investment"
						paginator="true"
						rows="15"
						paginatorPosition="bottom">
						
						<p:column headerText="Active">
							<h:outputText value="#{investment.active}" />
						</p:column>
		
						<p:column headerText="Type">
							<h:outputText value="#{investment.type.name}" />
						</p:column>
						
						<p:column headerText="Price">
							<h:outputText value="#{investment.actualPrice}" />
						</p:column>
		
						<p:column headerText="Amount">
							<h:outputText value="#{investment.amount}" />
						</p:column>
		
						<p:column headerText="When">
							<h:outputText value="#{investment.date}">
								<f:convertDateTime pattern="MM/dd/yyyy" />  
							</h:outputText>
						</p:column>
						
						<p:column headerText="Total">
							<h:outputText value="#{investment.amount * investment.actualPrice}" />
						</p:column>
						
						<p:column headerText="Delete">
							<p:commandButton 
								value="Delete"
								action="#{MBInvestment.remove(investment)}"
								update="tableInvestments, growl, @form, dashboard"
								icon="pi pi-times" />
						</p:column>				
					</p:dataTable>
				</h:form>
			</ui:define>
		</ui:composition>
	</h:body>
</html>